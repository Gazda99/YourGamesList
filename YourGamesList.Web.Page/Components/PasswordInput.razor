<MudTextField @bind-Value="@Password" TextChanged="@PasswordTextChanged"
              Label="Password" Variant="Variant.Outlined" InputType="@_passwordInput"
              Adornment="Adornment.End" AdornmentIcon="@_passwordInputIcon" OnAdornmentClick="@SwitchPasswordVisibilityClick" AdornmentAriaLabel="Show Password"
              Error="@PasswordTextFieldError" OnKeyDown="@OnEnter"/>

@code {
    [Parameter] public EventCallback OnEnterCallback { get; set; }

    private InputType _passwordInput = InputType.Password;
    private string _passwordInputIcon = Icons.Material.Outlined.VisibilityOff;

    public bool PasswordTextFieldError { get; set; } = false;
    public string Password { get; set; } = "";


    private void PasswordTextChanged(string text)
    {
        PasswordTextFieldError = false;
    }

    private void SwitchPasswordVisibilityClick()
    {
        if (_passwordInput == InputType.Password)
        {
            _passwordInput = InputType.Text;
            _passwordInputIcon = Icons.Material.Outlined.Visibility;
        }
        else
        {
            _passwordInput = InputType.Password;
            _passwordInputIcon = Icons.Material.Outlined.VisibilityOff;
        }
    }

    private async Task OnEnter(KeyboardEventArgs e)
    {
        if (OnEnterCallback.HasDelegate)
        {
            if (e.Key is "Enter" or "NumpadEnter")
            {
                await OnEnterCallback.InvokeAsync();
            }
        }
    }


}